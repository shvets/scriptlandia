  <%= f.error_messages %>

  <%
    if mode == 'new'
      submit_text = "Create"
    else
      submit_text = "Update"
    end

    current_user = User.current_user(session)

    if current_user.admin
      conditions = []
    else
      conditions = [ "company_id=?", current_user.company_id ]
    end

    disabled = (params[:pet_owner_id] != nil)
  %>

  <table width="100%">
    <tr>
      <td>
        <%= f.label :'pet Owner' %>: 
        <%= collection_select(:pet, :pet_owner_id, 
              PetOwner.find(:all, :order => "lastName", :conditions => conditions ),
              :id, :name, {}, {:disabled => disabled }) %>
      </td>

      <td>
        <%= "Cat or Dog?" %>: <%= select(:pet, :subtype, %w(cat dog)) %>
      </td>

      <td>
        <%= f.label :name %>: <%= f.text_field :name %>
      </td>
    </tr>

    <tr>
      <td>
        <%= f.label :breed %>: <%= f.text_field :breed %>
      </td>

      <td>
        <%= f.label :size %>: <%= f.text_field :size %>
      </td>

      <td>
        <%= f.label :color %>: <%= f.text_field :color %>
      </td>
    </tr>

    <tr>
      <td>
        <%= f.label :'birth Date' %>: <%= date_select(:pet, :birthDate, :order => [:month, :day, :year])%>
      </td>

      <td>
        <%= f.label :sex %>: <%= select(:pet, :sex, %w(male female)) %>
      </td>

      <td>
        <%= f.label :'alive' %>: <%= select(:pet, :alive, %w(yes no)) %>
      </td>
    </tr>

    <tr>
      <td>
        <%= f.label :veterinar %>: <%= f.text_field :veterinar %>
      </td>

      <td>
        <%= f.label :'referred By' %>: <%= f.text_field :referredBy %>
      </td>
    </tr>

    <tr>
      <td colspan="3">
        <table>
          <tr>
            <td><%= f.label :'medical Problems' %>:</td>
            <td><%= f.label :'special Instructions' %>:</td>
            <td><%= f.label :behavior %>:</td>
          </tr>

          <tr>
            <td><%= f.text_area :medicalProblems, "cols" => 25, "rows" => 5 %></td>
            <td><%= f.text_area :specialInstructions, "cols" => 25, "rows" => 5 %></td>
            <td><%= f.text_area :behavior, "cols" => 25, "rows" => 5 %></td>
          </tr>
        </table>
      </td>
    </tr>

    <tr>
      <td colspan="3">
        <%= f.label :'clip 1' %>: <%= f.text_field :clip1 %>
      </td>
    </tr>

    <tr>
      <td colspan="3">
        <%= f.label :'clip 2' %>: <%= f.text_field :clip2 %>
      </td>
    </tr>

    <tr>
      <td colspan="3">
        <%= f.label :'clip 3' %>: <%= f.text_field :clip3 %>
      </td>
    </tr>

    <tr>
      <td>
        <%= f.submit submit_text %>

        <%= link_to 'Cancel', pets_path %>
      </td>
    </tr>
  </table>
