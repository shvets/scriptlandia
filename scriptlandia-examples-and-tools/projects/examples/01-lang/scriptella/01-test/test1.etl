<!-- test1.etl -->

<!DOCTYPE etl SYSTEM "http://scriptella.javaforge.com/dtd/etl.dtd">

<etl>
  <description>
    Test for access to database
  </description>

  <properties>
    <include href="etl.properties"/>
  </properties>

  <connection id="test" 
              driver="${driver}" url="${url}" user="${user}" password="${password}" 
              classpath="${repository.home.for.scriptella}\\hsqldb\\hsqldb\\1.8.0.1\\hsqldb-1.8.0.1.jar"/>

  <connection id="velocity" driver="velocity" url="report.txt" 
              classpath="${repository.home.for.scriptella}\\velocity\\velocity-dep\\1.4\\velocity-dep-1.4.jar"/>

  <script connection-id="test">
      DROP TABLE User IF EXISTS; 
      CREATE TABLE User (
          name VARCHAR(100)
      );
      INSERT INTO User VALUES ('name1');
      INSERT INTO User VALUES ('name2');
  </script>

  <script connection-id="velocity">
    Results:
  </script>

  <query connection-id="test">
    select * from user;

    <script connection-id="velocity">
      ${name}
    </script>
  </query>

  <script connection-id="test"><!--Gracefully shutdown HSQLDB-->
    COMMIT;SHUTDOWN;
  </script>

</etl>
