<project name="configure-language" basedir=".">

  <scriptdef name="configure-language" language="beanshell">
    <attribute name="manager"/>
    <attribute name="name"/>

    <![CDATA[
      import org.apache.bsf.BSFManager;

      import org.sf.scriptlandia.launcher.ScriptlandiaLauncher;

      String repositoryHome = System.getProperty("repository.home");
      String scriptlandiaVersion = System.getProperty("scriptlandia.version");

      String name = attributes.get("name");
      String manager = attributes.get("manager");

      ScriptlandiaLauncher launcher = ScriptlandiaLauncher.getInstance();

      String pom = null;

      if(manager.equalsIgnoreCase("bsf")) {
        pom = repositoryHome + "/org/sf/scriptlandia/" + name + "/" + scriptlandiaVersion + 
              "/" + name + "-" + scriptlandiaVersion + ".pom";
      }
      else {
        pom = repositoryHome + "/javax/script/" + name + "-engine/1.0/" + name + "-engine-1.0.pom";

        if(!new File(pom).exists()) {
          print("does not exist");
        }
      }

      launcher.resolveDependencies(pom);
    ]]>
  </scriptdef>

<!--
  <target name="create.pom.file">
  <echoxml file="${dist.dir}/pom.xml">
    <project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>my.groupId</groupId>
    <artifactId>myArtifactId</artifactId>
    <version>1.0-SNAPSHOT</version>
    <dependencies>
    <dependency>
    <groupId>..</groupId>
    <artifactId>...</artifactId>
    <version>...</version>
    </dependency>
    </dependencies>
    </project>
  </echoxml>
  <target>
-->

</project>