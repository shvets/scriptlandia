<!-- -->

<h1>Listing companies</h1>

<%= button_to 'New Company', new_company_path %>
<br />

<% unless @companies.empty? %>

  <%= render :partial => "shared/geokit_init", :locals => { :list => @companies, :map_div => 'map' } %>

  <table width="100%">
    <tr>
      <th>Name</th>
      <th>Address</th>
      <th colspan="3">Commands</th>
    </tr>

    <% for @company in @companies %>
      <tr valign="top" class="<%=cycle('list-line-odd', 'list-line-even')%>">
        <td><%= in_place_text_field :company, :name %></td>
        <td><%= in_place_text_field :company, :address %></td>
        <td><%= link_to 'Show', @company %></td>
        <td><%= link_to 'Edit', edit_company_path(@company) %></td>
        <td><%= link_to 'Delete', @company, :confirm => 'Are you sure?', :method => :delete %></td>
      </tr>
    <% end %>
  </table>

  <table width="100%">
    <tr>
      <th><a href="#" onclick="toggleMapVisibility(); load();">Companies on Google Maps</a></th>
    </tr>

    <tr valign="top">
      <td>
        <div id="map" style="width:700px; height:300px; display:none"></div>
      </td>
    </tr>
  </table>

<% end %>  

 