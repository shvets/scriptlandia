#
# Copyright 2006-2007 Sun Microsystems, Inc.  All rights reserved.
# SUN PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#

BUILDDIR = ../..
PRODUCT  = sun
include $(BUILDDIR)/common/Defs.gmk

ifdef OPENJDK
    SUBDIRS += lcms
    ICCPROFILE_SRC_DIR = $(SHARE_SRC)/lib/cmm/lcms
else # !OPENJDK
    SUBDIRS += kcms
    ICCPROFILE_SRC_DIR = $(CLOSED_SRC)/share/lib/cmm/kcms
endif # OPENJDK

#
# ICC Profiles used by the CMM.
#
ICCPROFILE_DEST_DIR = $(LIBDIR)/cmm

iccprofiles: $(ICCPROFILE_DEST_DIR)/sRGB.pf $(ICCPROFILE_DEST_DIR)/GRAY.pf \
	     $(ICCPROFILE_DEST_DIR)/CIEXYZ.pf

ifndef OPENJDK
iccprofiles:  $(ICCPROFILE_DEST_DIR)/PYCC.pf \
	      $(ICCPROFILE_DEST_DIR)/LINEAR_RGB.pf
endif

$(ICCPROFILE_DEST_DIR)/sRGB.pf: $(ICCPROFILE_SRC_DIR)/sRGB.pf
	$(RM) $(ICCPROFILE_DEST_DIR)/sRGB.pf
	-$(MKDIR) -p $(ICCPROFILE_DEST_DIR)
	$(CP) $(ICCPROFILE_SRC_DIR)/sRGB.pf $(ICCPROFILE_DEST_DIR)
	$(CHMOD) 444 $(ICCPROFILE_DEST_DIR)/sRGB.pf

$(ICCPROFILE_DEST_DIR)/GRAY.pf: $(ICCPROFILE_SRC_DIR)/GRAY.pf
	$(RM) $(ICCPROFILE_DEST_DIR)/GRAY.pf
	-$(MKDIR) -p $(ICCPROFILE_DEST_DIR)
	$(CP) $(ICCPROFILE_SRC_DIR)/GRAY.pf $(ICCPROFILE_DEST_DIR)
	$(CHMOD) 444 $(ICCPROFILE_DEST_DIR)/GRAY.pf

$(ICCPROFILE_DEST_DIR)/CIEXYZ.pf: $(ICCPROFILE_SRC_DIR)/CIEXYZ.pf
	$(RM) $(ICCPROFILE_DEST_DIR)/CIEXYZ.pf
	-$(MKDIR) -p $(ICCPROFILE_DEST_DIR)
	$(CP) $(ICCPROFILE_SRC_DIR)/CIEXYZ.pf $(ICCPROFILE_DEST_DIR)
	$(CHMOD) 444 $(ICCPROFILE_DEST_DIR)/CIEXYZ.pf

$(ICCPROFILE_DEST_DIR)/PYCC.pf: $(ICCPROFILE_SRC_DIR)/PYCC.pf
	$(RM) $(ICCPROFILE_DEST_DIR)/PYCC.pf
	-$(MKDIR) -p $(ICCPROFILE_DEST_DIR)
	$(CP) $(ICCPROFILE_SRC_DIR)/PYCC.pf $(ICCPROFILE_DEST_DIR)
	$(CHMOD) 444 $(ICCPROFILE_DEST_DIR)/PYCC.pf

$(ICCPROFILE_DEST_DIR)/LINEAR_RGB.pf: $(ICCPROFILE_SRC_DIR)/LINEAR_RGB.pf
	$(RM) $(ICCPROFILE_DEST_DIR)/LINEAR_RGB.pf
	-$(MKDIR) -p $(ICCPROFILE_DEST_DIR)
	$(CP) $(ICCPROFILE_SRC_DIR)/LINEAR_RGB.pf $(ICCPROFILE_DEST_DIR)
	$(CHMOD) 444 $(ICCPROFILE_DEST_DIR)/LINEAR_RGB.pf

iccprofiles.clean:
	$(RM) -r $(ICCPROFILE_DEST_DIR)


clobber: iccprofiles.clean
	$(SUBDIRS-loop)

clean: iccprofiles.clean
	$(SUBDIRS-loop)

all build:: iccprofiles
	$(SUBDIRS-loop)

openjdk::
	$(MAKE) OPENJDK=true build

.PHONY: iccprofiles iccprofiles.clean copy-files openjdk
